---
title: 'Das JavaScript-Modul-Designmuster'
parent: Developers
---

<article class="bcls-article">
  <h1>Konzepte: Das Designmuster des JavaScript-</h1>
  <summary>In diesem Thema erfahren Sie, wie Sie das JavaScript-Modul-Entwurfsmuster verwenden, um die Wahrscheinlichkeit zu verringern, dass Ihr Code mit anderen Skripten auf Ihrer Webseite in Konflikt gerät.</summary>
  <section class="bcls-section">
    <h2 id="Scope_conflicts">Umfangskonflikte</h2>
    <p>Wenn Sie in JavaScript eine Variable mit dem definieren <code translate="No">var</code> Element, es ist innerhalb der Funktion, die es definiert ist, Gültigkeitsbereich. Wenn Sie eine Variable ohne Verwendung definieren <code translate="No">var</code> Dann wird ihm der globale Bereich zugewiesen. Dies bedeutet, dass globale Variablen für Kollisionen mit anderen Skripten auf Ihrer Seite anfällig sind.</p>
    <p>Schauen wir uns ein Codebeispiel an. Im folgenden Code befinden sich die Funktion und die Variablen im Bereich der Seite.</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">// script 1
var incrementCount = function() {
    count++;
}

var myButton = document.getElementById('buttonId');
var count = 0;

myButton.onclick = incrementCount;</code></pre>
    <p>Angenommen, es gibt eine Funktion außerhalb Ihres Skripts, die auch die globale Funktion ändert <code translate="No">count</code> Variable. Diese Kollision von Skripten kann zu unerwarteten Ergebnissen führen.</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">// script 2
var countVideos = function(videoList) {
    count = videoList.length;
}</code></pre>
    <p>Ergebnisse:</p>
    <ol>
      <li>Benutzer wählt die aus <code translate="No">myButton</code> Taste zweimal drücken, um die <code translate="No">count</code> Variable in <code translate="No">script 1</code>.
        <ul>
          <li><code translate="No">count</code> = <strong>2</strong></li>
        </ul>
      </li>
      <li>Die <code translate="No">countvideos</code> Funktion wird aufgerufen, die in <code translate="No">Script 2</code>, aber auch auf Ihrer Webseite existiert. Sagen wir, dass die <code translate="No">videoList</code> enthält 10 Artikel. Jetzt die <code translate="No">count</code> globale Variable hat einen Wert von <strong>10</strong>.
        <ul>
          <li><code translate="No">count</code> = <strong>10</strong></li>
        </ul>
      </li>
      <li>Wenn der Benutzer das nächste Mal die auswählt <code translate="No">myButton</code> Taste, die <code translate="No">count</code> Variable gibt unerwartete Ergebnisse zurück.
        <ul>
          <li>Erwartet: <code translate="No">count</code> = <strong>3</strong></li>
          <li>Tatsächlich: <code translate="No">count</code> = <strong>11</strong></li>
        </ul>
      </li>
    </ol>
    <p>Sie können versuchen, Konflikte in Ihren Skripten zu vermeiden, es gibt jedoch keine Garantie dafür, dass auf Ihrer Seite enthaltene Skripte von Drittanbietern keine ähnlichen Funktions- und Variablennamen verwenden.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Anonymous_functions">Anonyme Funktionen</h2>
    <p>Eine Lösung besteht darin, Ihren Code in eine anonyme Funktion (auch als Closure bezeichnet) zu verpacken, die sofort ausgeführt wird. Auf Ihren Code innerhalb eines Abschlusses können andere Skripte nicht zugreifen. Auf diese Weise können Sie private Funktionen und Variablen erstellen.</p>
    <p>Hier ist die Syntax für eine anonyme Funktion:</p>
    <ul>
      <li>Zeile 3: enthält einen zusätzlichen Satz von Klammern, der JavaScript anweist, die Funktion unmittelbar nach dem Analysieren auszuführen, anstatt auf einen anderen Code zu warten, der die Funktion aufruft.</li>
    </ul>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">(function () {
    // your code
}<span class="bcls-highlight">()</span>);</code></pre>
    <p>Verschlüsse können leistungsstark sein, da sie während der gesamten Lebensdauer der Anwendung Datenschutz und Status bieten. Für den Code innerhalb des Abschlusses befinden sich alle Variablen und Funktionen nur im Abschlussbereich. Ihr Code innerhalb des Abschlusses kann jedoch weiterhin auf alle globalen Variablen oder Funktionen zugreifen.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Globals">Globals</h2>
    <p>Obwohl JavaScript über eine Funktion verfügt, die als implizite globale Elemente bezeichnet wird, kann die Verwaltung Ihres Codes schwierig sein, da es nicht einfach ist, festzustellen, welche Variablen global sind. Um festzustellen, ob eine Variable global ist, muss der Interpreter rückwärts durch die Bereichskette gehen und nach a suchen <code translate="No">var</code> Anweisung, die im Namen übereinstimmt. Wenn keine gefunden wird, wird angenommen, dass die Variable global ist.</p>
    <h3>Pass in Globals</h3>
    <p>Mit der anonymen Funktion können Sie globale Parameter explizit übergeben. Dies wird als Importieren von Parametern in Ihren Code bezeichnet.</p>
    <p>Hier ist ein Beispiel:</p>
    <ul>
      <li>Zeile 1: Definiert den Namen der Parameter, die an die Funktion übergeben werden. Beachten Sie, dass sie nicht mit den Namen in Zeile 3 übereinstimmen müssen. Hier die <code translate="No">window</code> Objekt wird an einen Parameter mit dem Namen übergeben <code translate="No">window1</code>.</li>
      <li>Zeile 3: passiert die <code translate="No">window</code> Objekt in die Funktion.</li>
    </ul>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">(function( window1, undefined ) {
    ...
})(window);</code></pre>
    <p>Da nur 1 Objekt übergeben wird, aber zwei Parameter vorhanden sind, der Wert von <code translate="No">undefined</code> wird undefiniert sein.</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">typeof undefined == "undefined"</code></pre>
    <p>Dies kann nützlich sein, wenn Sie auf einfache Weise überprüfen möchten, ob andere Variablen definiert sind.</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">if(variable1 === undefined)</code></pre>
    <h3>Globale exportieren</h3>
    <p>Möglicherweise möchten Sie auch Variablen und Funktionen außerhalb Ihrer anonymen Funktion übergeben. Sie können dies tun, indem Sie die <code translate="No">return</code> Wert.</p>
    <p>Hier ist ein Beispiel:</p>
    <ul>
      <li>Zeile 1: weist unsere anonyme Funktion zu <code translate="No">BCLS</code>. Dieser Wert kann beliebig sein. In diesem Beispiel verwenden wir BCLS (Brightcove Learning Services).</li>
    </ul>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">var BCLS = (function( window1, undefined ) {
    var object1 = {};
    object1.count = 1;
    object1.method = function () {
        ...
    }
    <span class="bcls-highlight">return object1;</span>
})(window);</code></pre>
    <p>Das <code translate="No">object1</code> Das Objekt ist jetzt global mit zwei öffentlichen Eigenschaften verfügbar, einer Variablen mit dem Namen <code translate="No">count</code> und eine Funktion namens <code translate="No">method</code>. Sie können außerhalb unserer anonymen Funktion wie folgt aufgerufen werden:</p>
    <ul>
      <li><code translate="No">BCLS.object1.count</code></li>
      <li><code translate="No">BCLS.object1.method</code></li>
    </ul>
  </section>
  <section class="bcls-section">
    <h2 id="Complete_example">Vollständige Beispiele</h2>
    <p>Hier finden Sie einige vollständige Beispiele für das Entwurfsmuster des JavaScript-Moduls.</p>
    <h3>Beispiel 1</h3>
    <p>Dieses Beispiel zeigt, wie private und öffentliche Variablen und Funktionen mithilfe des Modulmusters erstellt werden.</p>
    <ul>
      <li>Private Variablen: <code translate="No">myvar</code>, <code translate="No">myvar2</code></li>
      <li>Private Funktionen: <code translate="No">fname</code>, <code translate="No">fname2</code></li>
      <li>Öffentliche Variable: <code translate="No">myvar3</code></li>
      <li>Öffentliche Funktion: <code translate="No">fname3</code></li>
    </ul>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">var BCLS = ( function() {
   var myvar = value,
       myvar2 = value;

   fname = function() {
        ...
   };
   fname2 = function() {
        ...
   };

   return {
        fname3 : function() {
             ...
        },
        myvar3 = value;
   };
}());</code></pre>
    <h3>Beispiel 2</h3>
    <p>Dieses Beispiel übergibt globale Objekte und macht eine öffentliche Funktion verfügbar.</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">var BCLS = (function( window, document, videojs ) {
    var myvar = value;

    // use a global object passed into the anonymous function
    videojs.registerPlugin('overlay');

    fname = function() {
        ...
    }
    return {
      fname2 : function() {
            ...
        }
    }
})(window, document, videojs);

// call the public function fname2
var newvar = BCLS.fname2();</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="Code_samples">Codebeispiele</h2>
    <p>Einige unserer Codebeispiele verwenden das JavaScript-Modul-Entwurfsmuster, und Sie können sie auf Ideen zur Implementierung dieses Musters überprüfen.</p>
    <ul>
      <li><a href="https://player.support.brightcove.com/code-samples/brightcove-player-sample-floating-player.html">Schwimmender Spieler</a></li>
    </ul>
  </section>
</article>